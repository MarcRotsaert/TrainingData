<!DOCTYPE html>
{% extends "base.html" %}
{% load static %}

<html lang="en">
<head>
    {% block body_block %}
    <meta charset="utf-8">
    <title>testpage</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="{% static "css/test_polar.css" %}">
    
    </head>

        
    <body>
        {% comment %} <script src={% static  "/js/training_test.js" %}></script> {% endcomment %}
        <script src={% static  "js/training_test.js" %}></script>


        {% comment %} <img src={% static "images/knmirotterdam_220814_07.png" %} {% endcomment %}
        <br>lalalalala</br>
    <p> This is just a test </p>
    <br></br>

    <div id="lapdata"> {% if lapdata %}
        {% comment %} <h3><LAPDATA</h3> {% endcomment %}
        <table>
        {% for lap in lapdata %}
            <tr><td>{{lap.distance}}</td> <td>{{lap.speed.avg }}</td> <td>{{lap.heartRate.avg }}</td> </tr>
        {% endfor %}
            {% endif %}
        </table>
        </div>
    <p> number of run training in 2014: {{ trainingen|length }} </p>
    
        
    <p>{{ ttypes }}</p>
    {% comment %} <select id="trainingtype" name="ttypes" size="4" onclick="updateText2()"> {% endcomment %}
    
    <form id="trainingForm" action="/polar/" method="get">
        {% csrf_token %}
        <select id="trainingtype" name="ttypes" size="4" onclick="" >
        {% if  ttypes %}
            {% for type_name in ttypes %}
                <option value={{ type_name}}>{{type_name}}</option>
            {% endfor %}
            {% else %}
                <option value="No Choice">No Choice</option>
        {% endif %}

    </select>
    <input type="submit" id="to_addtt" value="to next page"> </input>
</form>
<script>
    document.getElementById('trainingForm').addEventListener('submit', function(event) {
        var selectedValue = document.getElementById('trainingtype').value;
        // Attach the selected value to a input field in the form
        this.action = '/polar/?selected_type=' + encodeURIComponent(selectedValue);});
    </script>



    <table name="traindata">
        <tr>
            <th>Date</th>
            <th>location</th>
            <th>Distance(m)</th>
            <th>vel avg(km/u)</th>
            <th>Hsl avg(bpm)</th>
            <th>training description</th>
        </tr>
    <p>{% for training in trainingen|dictsort:"fname" %} 
        <tr value={{training.fname}}  
        name="traindata" 
        id="traindata"
        data-url="{% url 'test_polar:return_lapdata' %}">
            <td>{{training.startTime|slice:":10"}}</td> 
            
            {% if training.location != None %}
            <td>{{training.location|upper}}</td>
            {% else %}
            <td>not defined</td>
            {% endif %}
            <td>{{training.distance}}</td>
            <td>{{training.speed.avg}}</td>
            <td>{{training.heartRate.avg}} / {{training.heartRate.max}}
            </td>
            <td id="tdescr" 
             
            onclick="showLapdata(this)">{{training.trainingdescription.description|linebreaks}}</td>
        </tr>
        {% endfor %}
    </p>
    <br><br>


</body>
{% endblock %}