<!DOCTYPE html>
{% extends "base.html" %}
{% load static %}
{% load cache %}
<html lang="en">
<head>
    {% block summary_block %}
    <meta charset="utf-8">
    <title>summary</title>
    {% block adapt %}
    {% endblock %}
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="{% static "css/test_polar.css" %}">
    
</head>
        
    <body>
        {% comment %} <script src={% static  "/js/training_test.js" %}></script> {% endcomment %}
        <script src={% static  "js/training_test.js" %}></script>


        {% comment %} <img src={% static "images/knmirotterdam_220814_07.png" %} {% endcomment %}
    <p> This is a test </p>

    <div id="lapdata"> 
        {% if lapdata %}
        {% comment %} <h3><LAPDATA</h3> {% endcomment %}
        <table>
        {% for lap in lapdata %}
            <tr><td>{{lap.distance|floatformat:0}}</td> 
                <td>{{lap.speed.avg|floatformat:1 }}</td> 
                <td>{{lap.speed.avg_corr|floatformat:1 }}</td> 
                <td>{{lap.heartRate.avg|floatformat:0}}</td> 
                <td>{{lap.heartRate.max|floatformat:0}}</td> </tr>
        {% endfor %}
            {% endif %}
        </table>
        <div class="info">
        <br> number of run training in table: {{ trainingen|length }} </br>
        </div>
    <p>{{ ttypes }}</p>
    {% comment %} <select id="trainingtype" name="ttypes" size="4" onclick="updateText2()"> {% endcomment %}
    

        {% if  ttypes %}
        <form id="trainingForm" action="/summary/" method="get">
            {% csrf_token %}
            <select id="trainingtype" name="ttypes" size="4" onclick="" >
            {% for type_name in ttypes %}
                <option value={{ type_name}}>{{type_name}}</option>
            {% endfor %}
            {% comment %} {% else %} {% endcomment %}
            {% comment %} <option value="No Choice">No Choice</option> {% endcomment %}
            
        </select>
        <input type="submit" id="to_addtt" value="to next page" onclick="toHeadofpage()"> </input>
        {% endif %}
        </form>
{% endblock %}

{% block traintab_block %}
<table name="traindata">
    <tr>
            <th>Date</th>
            <th>location</th>
            <th>Distance(m)</th>
            <th>vel avg(km/u)</th>
            <th>Hsl avg(bpm)</th>
            <th>training description</th>
        </tr>
        <p>{% cache 60 "training_data" %}
            {% for training in trainingen|dictsort:"startTime" %} 
            <tr value={{training.fname}}  
            name="traindata" 
            id="traindata"
            
            data-url="{% url 'test_polar:showlapdata' training.fname %}">
            <td>{{training.startTime|slice:":10"}}</td> 
            
            {% if training.location != None %}
            <td id="location">{{training.location|upper}}</td>
            {% else %}
            <td id="location">not defined</td>
            {% endif %}
            <td>{{training.distance|floatformat:0}}</td>
            <td>{{training.speed.avg|floatformat:1}}</td>
            <td>{{training.averageHeartRate|floatformat:0}} / {{training.maximumHeartRate|floatformat:0}}
            </td>
            <td id="tdescr" 
            
            onclick="showLapdata(this)">{{training.trainingdescription.description|linebreaks}}</td>
        </tr>
        {% endfor %}
        {% endcache %}
        </p>
    <br><br>
    {% endblock %}
    
    
    
</body>
</html>