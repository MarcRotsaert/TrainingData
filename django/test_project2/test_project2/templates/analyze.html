<!DOCTYPE html>
{% extends "base.html" %}
{% load static %}
{% load cache %}
{% load table_filters %}
<html lang="en">
<head>
    {% block summary_block %}
    <meta charset="utf-8">
    <title>summary</title>
    {% block adapt %}
    {% endblock %}
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="{% static "css/test_polar.css" %}">
    
</head>
<div>
    <canvas id="myChart"></canvas>
  </div>
  
  {% comment %} <script src="https://cdn.jsdelivr.net/npm/chart.js"></script> {% endcomment %}
  <script src="{% static 'node_modules/chart.js/dist/chart.umd.js' %} "></script>

  <script>
    const ctx = document.getElementById('myChart');
  
    new Chart(ctx, {
      type: 'bar',
      data: {
        labels: ['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'],
        datasets: [{
          label: '# of Votes',
          data: [12, 19, 3, 5, 2, 3],
          borderWidth: 1
        }]
      },
      options: {
        scales: {
          y: {
            beginAtZero: true
          }
        }
      }
    });
  </script>
  {% block traintab_block %}
<table name="traindata">
    <tr>
            <th>Date</th>
            <th>location</th>
            <th>Distance(m)</th>
            <th>vel avg(min/km)</th>
            <th>Hsl avg(bpm)</th>
            <th>training description</th>
        </tr>
        <p>{% cache 60 "training_data" %}
            {% for training in trainingen|dictsort:"startTime" %} 
            <tr value={{training.fname}}  
            name="traindata" 
            id="traindata"
            {% if training.trainingtype.roadrace %}  
            class="roadrace"
            {% elif training.trainingtype.easyrun %}  
            class="easyrun"
            {% elif training.trainingtype.sprint %}  
            class="sprint"
            {% elif training.trainingtype.climax %}  
            class="climax"
            {% elif training.trainingtype.interval == "interval" %}
            class="interval"
            {% endif %}

            data-url="{% url 'test_polar:showlapdata' training.fname %}">
            <td>{{training.startTime|slice:":10"|weekday}}</td> 
            
            {% if training.location != None %}
            <td id="location">{{training.location|upper}}</td>
            {% else %}
            <td id="location">not defined</td>
            {% endif %}
            <td>{{training.distance|floatformat:0}}</td>
            <td>{{training.speed.avg| kmh2minkm}}</td>
            <td>{{training.averageHeartRate|floatformat:0}} / {{training.maximumHeartRate|floatformat:0}}
            </td>
            <td id="tdescr" 
            onclick="showLapdata(this)">{{training.trainingdescription.description|linebreaks}}</td>
        </tr>
        {% endfor %}
        {% endcache %}
        </p>
    <br><br>
    {% endblock %}

  {% endblock %}